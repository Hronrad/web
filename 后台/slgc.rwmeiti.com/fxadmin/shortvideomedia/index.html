<!DOCTYPE html>

<link rel="stylesheet" type="text/css" href="/static/assets/css/mixin.css" />
<link rel="stylesheet" type="text/css" href="/static/assets/css/global.css" />
<link rel="stylesheet" type="text/css" href="/static/assets/js/layui/css/layui.css" />
<link rel="stylesheet" type="text/css" href="/static/assets/css/article.css" />
<link rel="stylesheet" type="text/css" href="/static/assets/css/iconfont.css" />
<style>
    .tabs-left li:first-child{ border-radius: 5px 0px 0px 5px; }
    .tabs-left li:first-child .layui-form-radio>div{ border-radius: 5px 0px 0px 5px !important; }
    .tabs-left li:last-child{ border-radius: 0px 5px 5px 0px; }
    .tabs-left li:last-child .layui-form-radio>div{ border-radius: 0px 5px 5px 0px !important; }
    .tabs-left li{ float: left; position: relative;  }
    .tabs-left img{position: absolute; right: 0px; top: -5px; }
    .tabs .layui-form-radio:last-child>div { border-radius: 0 0px 0px 0 !important; }
    .tabs .layui-form-radio{ margin-right: -1px !important;}
    .tabs .layui-form-radio:nth-child(2)>div { border-radius: 0px 0 0 0px !important; }
    #price_min,#price_max{  width: 70px; height: 34px; border-radius: 5px; border: 1px solid #aaaaaa; text-indent: 8px;}
    #price_max{ margin-right: 10px;  }
    .xian{ float: left; line-height: 36px; margin: 0 8px; }
    .btns { width: 330px;  height: 36px;   float: left;  margin-top:10px;}
    .btn { width: 130px; height: 100%; float: left;border: 1px solid #DCDFE6;   color: #2c3e50; text-align: center;  line-height: 36px; background-color: #ffffff;  cursor: pointer; }
    .btn:first-child {border-radius: 5px 0 0 5px; }
    .btn:last-child { border-radius: 0 5px 5px 0; }
    .btn.active { background-color: #1890ff; border-color: #1890ff;  color: #ffffff; }
    .lx_tpl{position: relative;}
    .lx_tpl a{margin:0px 4px}
    .lx_tpl:hover{height: 50px;}
    .lx_tpl .wechatImg .imgHover{    display: none; position: absolute; width: 50px; top: 0px;  left: 0px;  z-index: 99999;}
    .lx_tpl .wechatImg:hover  .imgHover{display: block;}
    .xhsname_tpl{width: 100%; display: flex;}
    .xhsname_tpl img{width: 40px;height: 40px; }
    .xhsname_tpl p{margin-left:4px;    line-height: 20px; text-align: left;}
    #price_range > div.layui-unselect.layui-form-radio > div{background-color: #1890ff; border-radius: 5px; color: #ffffff !important; }
</style>

<div class="main-body">
    <div class="layui-row layui-col-space20">
        <div class="layui-col-md12">
      <span class="layui-breadcrumb">
        <a href="/fxadmin/index/home.html" target="iframe">首页</a>
        <a href="javascript:;">短视频素材管理</a>
        <a style=" color: black !important; cursor: inherit;">短视频价格</a>
      </span>

        </div>
        <form class="layui-form" lay-filter="filter" id="filtForm">
            <div class="layui-col-md12 step2">
                <div class="card filters">
                                        <div class="layui-form-item">
                        <label class="layui-form-label">地区：</label>
                        <div class="layui-input-block">
                            <input type="radio" name="province" value="" title="全部" checked>

                                                        <input type="radio" name="province" value="北京市" title="北京市">
                                                        <input type="radio" name="province" value="天津市" title="天津市">
                                                        <input type="radio" name="province" value="上海市" title="上海市">
                                                        <input type="radio" name="province" value="重庆市" title="重庆市">
                                                        <input type="radio" name="province" value="河北省" title="河北省">
                                                        <input type="radio" name="province" value="山西省" title="山西省">
                                                        <input type="radio" name="province" value="辽宁省" title="辽宁省">
                                                        <input type="radio" name="province" value="吉林省" title="吉林省">
                                                        <input type="radio" name="province" value="黑龙江省" title="黑龙江省">
                                                        <input type="radio" name="province" value="江苏省" title="江苏省">
                                                        <input type="radio" name="province" value="浙江省" title="浙江省">
                                                        <input type="radio" name="province" value="安徽省" title="安徽省">
                                                        <input type="radio" name="province" value="福建省" title="福建省">
                                                        <input type="radio" name="province" value="江西省" title="江西省">
                                                        <input type="radio" name="province" value="山东省" title="山东省">
                                                        <input type="radio" name="province" value="河南省" title="河南省">
                                                        <input type="radio" name="province" value="湖北省" title="湖北省">
                                                        <input type="radio" name="province" value="湖南省" title="湖南省">
                                                        <input type="radio" name="province" value="广东省" title="广东省">
                                                        <input type="radio" name="province" value="海南省" title="海南省">
                                                        <input type="radio" name="province" value="四川省" title="四川省">
                                                        <input type="radio" name="province" value="贵州省" title="贵州省">
                                                        <input type="radio" name="province" value="云南省" title="云南省">
                                                        <input type="radio" name="province" value="陕西省" title="陕西省">
                                                        <input type="radio" name="province" value="甘肃省" title="甘肃省">
                                                        <input type="radio" name="province" value="青海省" title="青海省">
                                                        <input type="radio" name="province" value="台湾省" title="台湾省">
                                                        <input type="radio" name="province" value="内蒙古自治区" title="内蒙古自治区">
                                                        <input type="radio" name="province" value="广西壮族自治区" title="广西壮族自治区">
                                                        <input type="radio" name="province" value="西藏自治区" title="西藏自治区">
                                                        <input type="radio" name="province" value="宁夏回族自治区" title="宁夏回族自治区">
                                                        <input type="radio" name="province" value="新疆维吾尔自治区" title="新疆维吾尔自治区">
                                                        <input type="radio" name="province" value="香港特别行政区" title="香港特别行政区">
                                                        <input type="radio" name="province" value="澳门特别行政区" title="澳门特别行政区">
                            
                        </div>
                    </div>
                                        <div class="layui-form-item">
                        <label class="layui-form-label">平台：</label>
                        <div class="layui-input-block">
                            <input type="radio" name="platform" value="" title="全部" checked>

                                                        <input type="radio" name="platform" value="抖音" title="抖音">
                                                        <input type="radio" name="platform" value="快手" title="快手">
                                                        <input type="radio" name="platform" value="哔哩哔哩" title="哔哩哔哩">
                                                        <input type="radio" name="platform" value="小红书" title="小红书">
                                                        <input type="radio" name="platform" value="央视频" title="央视频">
                                                        <input type="radio" name="platform" value="好看视频" title="好看视频">
                                                        <input type="radio" name="platform" value="搜狐视频" title="搜狐视频">
                                                        <input type="radio" name="platform" value="西瓜视频" title="西瓜视频">
                                                        <input type="radio" name="platform" value="网易视频" title="网易视频">
                                                        <input type="radio" name="platform" value="腾讯视频" title="腾讯视频">
                                                        <input type="radio" name="platform" value="新浪视频" title="新浪视频">
                                                        <input type="radio" name="platform" value="豆瓣视频" title="豆瓣视频">
                                                        <input type="radio" name="platform" value="一点资讯" title="一点资讯">
                                                        <input type="radio" name="platform" value="知乎" title="知乎">
                                                        <input type="radio" name="platform" value="微博" title="微博">
                                                        <input type="radio" name="platform" value="微信视频号" title="微信视频号">
                                                        <input type="radio" name="platform" value="优酷" title="优酷">
                                                        <input type="radio" name="platform" value="爱奇艺" title="爱奇艺">
                                                        <input type="radio" name="platform" value="CSDN博客" title="CSDN博客">
                                                        <input type="radio" name="platform" value="车市号" title="车市号">
                                                        <input type="radio" name="platform" value="其他" title="其他">
                            
                        </div>
                    </div>
                                        <div class="layui-form-item">
                        <label class="layui-form-label">性别：</label>
                        <div class="layui-input-block">
                            <input type="radio" name="gender" value="" title="全部" checked>

                                                        <input type="radio" name="gender" value="1" title="男">
                                                        <input type="radio" name="gender" value="2" title="女">
                            
                        </div>
                    </div>
                                        <div class="layui-form-item">
                        <label class="layui-form-label">行业：</label>
                        <div class="layui-input-block">
                            <input type="radio" name="industry" value="" title="全部" checked>

                                                        <input type="radio" name="industry" value="IT科技" title="IT科技">
                                                        <input type="radio" name="industry" value="生活消费" title="生活消费">
                                                        <input type="radio" name="industry" value="时尚美妆" title="时尚美妆">
                                                        <input type="radio" name="industry" value="娱乐休闲" title="娱乐休闲">
                                                        <input type="radio" name="industry" value="游戏竞技" title="游戏竞技">
                                                        <input type="radio" name="industry" value="汽车交通" title="汽车交通">
                                                        <input type="radio" name="industry" value="教育培训" title="教育培训">
                                                        <input type="radio" name="industry" value="酒店旅游" title="酒店旅游">
                                                        <input type="radio" name="industry" value="健康医疗" title="健康医疗">
                                                        <input type="radio" name="industry" value="房产家居" title="房产家居">
                                                        <input type="radio" name="industry" value="财经商业" title="财经商业">
                                                        <input type="radio" name="industry" value="文化艺术" title="文化艺术">
                                                        <input type="radio" name="industry" value="体育运动" title="体育运动">
                                                        <input type="radio" name="industry" value="食品餐饮" title="食品餐饮">
                                                        <input type="radio" name="industry" value="工业贸易" title="工业贸易">
                                                        <input type="radio" name="industry" value="亲子母婴" title="亲子母婴">
                                                        <input type="radio" name="industry" value="公益生活" title="公益生活">
                                                        <input type="radio" name="industry" value="广告传媒" title="广告传媒">
                                                        <input type="radio" name="industry" value="三农频道" title="三农频道">
                                                        <input type="radio" name="industry" value="其他" title="其他">
                            
                        </div>
                    </div>
                                        <div class="layui-form-item">
                        <label class="layui-form-label">投放方式：</label>
                        <div class="layui-input-block">
                            <input type="radio" name="can_hepai" value="" title="全部" checked>

                                                        <input type="radio" name="can_hepai" value="0" title="视频直发">
                                                        <input type="radio" name="can_hepai" value="1" title="原创寄拍">
                            
                        </div>
                    </div>
                                        <div class="layui-form-item">
                        <label class="layui-form-label">修改内容：</label>
                        <div class="layui-input-block">
                            <input type="radio" name="can_modify" value="" title="全部" checked>

                                                        <input type="radio" name="can_modify" value="0" title="不修改">
                                                        <input type="radio" name="can_modify" value="1" title="修改">
                            
                        </div>
                    </div>
                                        <div class="layui-form-item">
                        <label class="layui-form-label">官方媒体：</label>
                        <div class="layui-input-block">
                            <input type="radio" name="authority_media" value="" title="全部" checked>

                                                        <input type="radio" name="authority_media" value="1" title="官方媒体">
                                                        <input type="radio" name="authority_media" value="0" title="非官方媒体">
                            
                        </div>
                    </div>
                                        <div class="layui-form-item">
                        <label class="layui-form-label">账号认证：</label>
                        <div class="layui-input-block">
                            <input type="radio" name="account_auth" value="" title="全部" checked>

                                                        <input type="radio" name="account_auth" value="1" title="黄V认证">
                                                        <input type="radio" name="account_auth" value="2" title="蓝V认证">
                                                        <input type="radio" name="account_auth" value="3" title="红V认证">
                            
                        </div>
                    </div>
                                        <div class="layui-form-item">
                        <label class="layui-form-label">粉丝数：</label>
                        <div class="layui-input-block">
                            <input type="radio" name="fans_num" value="" title="全部" checked>

                                                        <input type="radio" name="fans_num" value="0@100" title="0~100">
                                                        <input type="radio" name="fans_num" value="100@500" title="100~500">
                                                        <input type="radio" name="fans_num" value="500@1000" title="500~1000">
                                                        <input type="radio" name="fans_num" value="1000@3000" title="1000~3000">
                                                        <input type="radio" name="fans_num" value="3000@5000" title="3000~5000">
                                                        <input type="radio" name="fans_num" value="5000@10000" title="5000~10000">
                                                        <input type="radio" name="fans_num" value="10000@50000" title="10000~50000">
                                                        <input type="radio" name="fans_num" value="50000@999999" title="50000以上">
                            
                        </div>
                    </div>
                                        <div class="layui-form-item">
                        <label class="layui-form-label">累计获赞数：</label>
                        <div class="layui-input-block">
                            <input type="radio" name="total_likes_num" value="" title="全部" checked>

                                                        <input type="radio" name="total_likes_num" value="0@100" title="0~100">
                                                        <input type="radio" name="total_likes_num" value="100@500" title="100~500">
                                                        <input type="radio" name="total_likes_num" value="500@1000" title="500~1000">
                                                        <input type="radio" name="total_likes_num" value="1000@3000" title="1000~3000">
                                                        <input type="radio" name="total_likes_num" value="3000@5000" title="3000~5000">
                                                        <input type="radio" name="total_likes_num" value="5000@10000" title="5000~10000">
                                                        <input type="radio" name="total_likes_num" value="10000@50000" title="10000~50000">
                                                        <input type="radio" name="total_likes_num" value="50000@999999" title="50000以上">
                            
                        </div>
                    </div>
                                        <div class="layui-form-item">
                        <label class="layui-form-label">价格分类：</label>
                        <div class="layui-input-block">
                            <input type="radio" name="price" value="" title="全部" checked>

                                                        <input type="radio" name="price" value="0@10" title="0~10">
                                                        <input type="radio" name="price" value="10@30" title="10~30">
                                                        <input type="radio" name="price" value="30@50" title="30~50">
                                                        <input type="radio" name="price" value="50@100" title="50~100">
                                                        <input type="radio" name="price" value="100@300" title="100~300">
                                                        <input type="radio" name="price" value="300@500" title="300~500">
                                                        <input type="radio" name="price" value="500@1000" title="500~1000">
                                                        <input type="radio" name="price" value="1000@999999" title="1000以上">
                                                        <div  style="margin-left:50px;display: inline-block" id="price_range">
                                <div style="float: left">
                                    <input type="text" id="price_min" placeholder="￥" >
                                </div>
                                <div class="xian">-</div>
                                <div style="float: left">
                                    <input type="text" id="price_max" placeholder="￥">
                                </div>
                                <input type="radio" name="price" value="init" title="确定">
                            </div>
                            
                        </div>
                    </div>
                                        <div class="layui-form-item">
                        <label class="layui-form-label">排序：</label>
                        <div class="layui-input-block">
                            <input type="radio" name="sort" value="" title="全部" checked>

                                                        <input type="radio" name="sort" value="10" title="价格升序">
                                                        <input type="radio" name="sort" value="11" title="价格降序">
                                                        <input type="radio" name="sort" value="20" title="粉丝数升序">
                                                        <input type="radio" name="sort" value="21" title="粉丝数降序">
                                                        <input type="radio" name="sort" value="30" title="平均点赞数升序">
                                                        <input type="radio" name="sort" value="31" title="平均点赞数降序">
                                                        <input type="radio" name="sort" value="40" title="总点赞数升序">
                                                        <input type="radio" name="sort" value="41" title="总点赞数降序">
                            
                        </div>
                    </div>
                                    </div>
            </div>
            <div class="layui-col-md12 step2">
                <div class="card tabs">
                    <div class="layui-row">
                        <div class="tabs-left">
                        </div>
                        <div class="tabs-input">
                            <input type="text" id="media_name" name="media_name" placeholder="请输入媒体名称" autocomplete="off"
                                   class="layui-input">
                        </div>
                        <div class="tabs-input">
                            <input type="text" id="remark" name="remark" placeholder="请输入备注" autocomplete="off"
                                   class="layui-input">
                        </div>
                        <div class="tabs-export">
                            <button type="button" class="layui-btn btn-success exportData">
                                <span>导出</span>
                                <span class="iconfont iconicon-test"></span>
                            </button>
                        </div>
                        <button style="display: none;" class="layui-btn" id="submit" lay-submit lay-filter="submit">立即提交</button>
                    </div>
                </div>
            </div>
        </form>
        <div class="layui-col-md12 step2">
            <div class="card table">
                <table id="table-media-list" lay-filter="mediaTable"></table>
            </div>
        </div>
    </div>
</div>


<script type="text/javascript" src="/static/assets/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="/static/assets/js/layui/layui.js"></script>
<script type="text/javascript" src="/static/assets/js/JsonExportExcel.min.js"></script>
<script type="text/javascript" src="/static/assets/js/global.js"></script>

<script>
    layui.use(['element', 'layer', 'table', 'form'], function () {
        var table = layui.table;
        var form = layui.form;
        var layer = layui.layer;
        var param = {};
        var cols = [[
            { field: 'media_name', align: 'center', title: '名称', minWidth: 230 ,templet: '#medianame_tpl'},
            { field: 'platform', align: 'center', title: '平台', minWidth:100 },
            { field: 'province', align: 'center', title: '所在地', minWidth: 150 },
            { field: 'industry', align: 'center', title: '行业', minWidth: 80  },
            { field: 'v0_cost', align: 'center', title: 'vo直发价', minWidth: 100 ,templet: '#price_tpl0' },
            { field: 'v1_cost', align: 'center', title: 'v1直发价', minWidth: 100 ,templet: '#price_tpl1' },
            { field: 'v2_cost', align: 'center', title: 'v2直发价', minWidth: 100 ,templet: '#price_tpl2' },
            { field: 'v3_cost', align: 'center', title: 'v3直发价', minWidth: 100 ,templet: '#price_tpl3' },
        { field: 'video_v0_cost', align: 'center', title: 'v0合拍价格', minWidth: 120, templet: '<span>￥{{d.hepai_v0_cost}}</span>' },
        { field: 'video_v1_cost', align: 'center', title: 'v1合拍价格', minWidth: 120, templet: '<span>￥{{d.hepai_v1_cost}}</span>' },
        { field: 'video_v2_cost', align: 'center', title: 'v2合拍价格', minWidth: 120, templet: '<span>￥{{d.hepai_v2_cost}}</span>' },
        { field: 'video_v3_cost', align: 'center', title: 'v3合拍价格', minWidth: 120, templet: '<span>￥{{d.hepai_v3_cost}}</span>' },
            { field: 'fans_num', align: 'center', title: '粉丝数', minWidth: 100 },
            { field: 'avg_likes_num', align: 'center', title: '平局点赞数', minWidth: 100 },
            { field: 'total_likes_num', align: 'center', title: '累计点赞数', minWidth: 100 },
            { field: 'remark', align: 'center', title: '备注', minWidth: 300 },

        ]];
        var dataTable = table.render({
            elem: '#table-media-list',
            url: '/fxadmin/shortvideomedia/index.html?show_price=1&sort=30',
            method: 'POST',
            // toolbar: true,
            // defaultToolbar: ["filter"],
            cols: cols,
            cellMinWidth: 100,
            page: true,
            limit:20
        });

        // 上方条件筛选事件
        $("#media_name").on("input", function () {
            $("#submit").trigger('click');
        });
        $("#remark").on("input", function () {
            $("#submit").trigger('click');
        });
        form.on('radio', function () {
            $("#submit").trigger('click');
        });

        form.on('select', function () {
            $("#submit").trigger('click');
        });

        form.on('submit(submit)', function (data) {
            param = data.field;
            if(param.price == 'init'){
                var min_price = $('#price_min').val(),
                    max_price = $('#price_max').val();
                if(min_price == '' &&  max_price == ''){
                    layer.msg('价格区间不能为空', { icon: 5 });
                    return false;
                }
                param.price = (min_price == '' ? 0 : min_price) + '@' + (max_price == '' ? 999999 : max_price);
            }
            reloadTable(1);
            return false;
        });

        //价格导出
        $(".exportData").off().on('click', function () {
            var params = $("#filtForm").serialize();
            
            $.ajax({
                type: "POST",
                url: '/fxadmin/shortvideomedia/index.html?export=true&' + params,
                dataType: "json",
                beforeSend: function () {
                    var index = layer.load(1, {
                        shade: [0.1, '#000']
                    });
                },
                success: function (res) {
                    if (res.code === 200) {
                        layer.closeAll();
                        JsonToExcel(res.data, '短视频价格表', 'sheet', res.msg);
                    } else {
                        layer.closeAll();
                        layer.msg(res.msg, { icon: 5 });
                    }
                }
            });
        });
        // 重新加载表格
        function reloadTable(page) {
            var curr;
            if (page) {
                curr = { curr: 1 }
            } else {
                curr = {}
            }
            dataTable.reload({
                where: param,
                page: curr
            });
        }

    });

</script>

<script type="text/html" id="medianame_tpl">
    <div class="xhsname_tpl">
         {{# if(d.platform === "快手"){ }}
    <img src="/static/assets/img/logo/kuaishou.png" >
    {{# } }}
    {{# if(d.platform === "小红书"){ }}
    <img src="/static/assets/img/logo/xiaohongshu.png" >
    {{# } }}
    {{# if(d.platform === "抖音"){ }}
    <img src="/static/assets/img/logo/douyin.png" >
    {{# } }}
    {{# if(d.platform === "好看视频"){ }}
    <img src="/static/assets/img/logo/haokanshiping.png" >
    {{# } }}
    {{# if(d.platform === "哔哩哔哩"){ }}
    <img src="/static/assets/img/logo/bilibili.png" >
    {{# } }}
    {{# if(d.platform === "其他"){ }}
    <img src="/static/assets/img/logo/qita.png" >
    {{# } }}
        <p>{{ d.media_name }} <a href="{{ d.entrance_link }}" target="_blank">(入口)</a></p>
    </div>
</script>

<script type="text/html" id="price_tpl0">
    ￥  {{ d.v0_cost}}
</script>
<script type="text/html" id="price_tpl1">
    ￥  {{ d.v1_cost}}
</script>
<script type="text/html" id="price_tpl2">
    ￥  {{ d.v2_cost}}
</script>
<script type="text/html" id="price_tpl3">
    ￥  {{ d.v3_cost}}
</script>


