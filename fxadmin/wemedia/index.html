<!DOCTYPE html>

<link rel="stylesheet" type="text/css" href="/static/assets/css/mixin.css" />
<link rel="stylesheet" type="text/css" href="/static/assets/css/global.css" />
<link rel="stylesheet" type="text/css" href="/static/assets/js/layui/css/layui.css" />
<link rel="stylesheet" type="text/css" href="/static/assets/css/article.css" />
<link rel="stylesheet" type="text/css" href="/static/assets/css/iconfont.css" />
<style>
   .tabs-left li:first-child{
      border-radius: 5px 0px 0px 5px;
    }
    .tabs-left li:first-child .layui-form-radio>div{
      border-radius: 5px 0px 0px 5px !important;
    }
    .tabs-left li:last-child{
      border-radius: 0px 5px 5px 0px;
    }
    .tabs-left li:last-child .layui-form-radio>div{
      border-radius: 0px 5px 5px 0px !important;
    }
    .tabs-left li{
      float: left;
      position: relative;
    }
    .tabs-left img{   
      position: absolute;
      right: 0px;
      top: -5px;
    }
    .tabs .layui-form-radio:last-child>div {
      border-radius: 0 0px 0px 0 !important;
    }
    .tabs .layui-form-radio{
      margin-right: -1px !important;
    }
    .tabs .layui-form-radio:nth-child(2)>div {
        border-radius: 0px 0 0 0px !important;
    }
   #price_min,#price_max{
       width: 70px;
       height: 34px;
       border-radius: 5px;
       border: 1px solid #aaaaaa;
       text-indent: 8px;
   }
   #price_max{
       margin-right: 10px;
   }
   .xian{
       float: left;
       line-height: 36px;
       margin: 0 8px;
   }
</style>
<div class="main-body">
  <div class="layui-row layui-col-space20">
    <div class="layui-col-md12">
      <span class="layui-breadcrumb">
        <a href="/fxadmin/index/home.html" target="iframe">首页</a>
        <a href="javascript:;">自媒体管理</a>
        <a><cite>自媒体价格</cite></a>
      </span>
    </div>
    <form class="layui-form" lay-filter="filter" id="filtForm">
      <div class="layui-col-md12 step2">
        <div class="card filters">
                    <div class="layui-form-item">
            <label class="layui-form-label">地区：</label>
            <div class="layui-input-block">
              <input type="radio" name="province" value="" title="全部" checked>
                            <input type="radio" name="province" value="综合全国" title="综合全国">
                            <input type="radio" name="province" value="北京" title="北京">
                            <input type="radio" name="province" value="天津" title="天津">
                            <input type="radio" name="province" value="上海" title="上海">
                            <input type="radio" name="province" value="重庆" title="重庆">
                            <input type="radio" name="province" value="河北" title="河北">
                            <input type="radio" name="province" value="山西" title="山西">
                            <input type="radio" name="province" value="辽宁" title="辽宁">
                            <input type="radio" name="province" value="吉林" title="吉林">
                            <input type="radio" name="province" value="黑龙江" title="黑龙江">
                            <input type="radio" name="province" value="江苏" title="江苏">
                            <input type="radio" name="province" value="浙江" title="浙江">
                            <input type="radio" name="province" value="安徽" title="安徽">
                            <input type="radio" name="province" value="福建" title="福建">
                            <input type="radio" name="province" value="江西" title="江西">
                            <input type="radio" name="province" value="山东" title="山东">
                            <input type="radio" name="province" value="河南" title="河南">
                            <input type="radio" name="province" value="湖北" title="湖北">
                            <input type="radio" name="province" value="湖南" title="湖南">
                            <input type="radio" name="province" value="广东" title="广东">
                            <input type="radio" name="province" value="甘肃" title="甘肃">
                            <input type="radio" name="province" value="四川" title="四川">
                            <input type="radio" name="province" value="贵州" title="贵州">
                            <input type="radio" name="province" value="海南" title="海南">
                            <input type="radio" name="province" value="云南" title="云南">
                            <input type="radio" name="province" value="青海" title="青海">
                            <input type="radio" name="province" value="陕西" title="陕西">
                            <input type="radio" name="province" value="新疆" title="新疆">
                            <input type="radio" name="province" value="宁夏" title="宁夏">
                            <input type="radio" name="province" value="内蒙古" title="内蒙古">
                            <input type="radio" name="province" value="西藏" title="西藏">
                            <input type="radio" name="province" value="广西" title="广西">
                            <input type="radio" name="province" value="港澳台" title="港澳台">
                          </div>
          </div>
                    <div class="layui-form-item">
            <label class="layui-form-label">平台：</label>
            <div class="layui-input-block">
              <input type="radio" name="platform" value="" title="全部" checked>
                            <input type="radio" name="platform" value="百家号" title="百家号">
                            <input type="radio" name="platform" value="东方头条" title="东方头条">
                            <input type="radio" name="platform" value="搜狐网" title="搜狐网">
                            <input type="radio" name="platform" value="新浪号" title="新浪号">
                            <input type="radio" name="platform" value="网易号" title="网易号">
                            <input type="radio" name="platform" value="一点资讯" title="一点资讯">
                            <input type="radio" name="platform" value="uc头条" title="UC头条">
                            <input type="radio" name="platform" value="腾讯号" title="腾讯号">
                            <input type="radio" name="platform" value="凤凰号" title="凤凰号">
                            <input type="radio" name="platform" value="知乎号" title="知乎号">
                            <input type="radio" name="platform" value="豆瓣" title="豆瓣">
                            <input type="radio" name="platform" value="车家号" title="车家号">
                            <input type="radio" name="platform" value="东方财富号" title="东方财富号">
                            <input type="radio" name="platform" value="小红书" title="小红书">
                            <input type="radio" name="platform" value="哔哩哔哩" title="哔哩哔哩">
                            <input type="radio" name="platform" value="雪球号" title="雪球号">
                            <input type="radio" name="platform" value="微博" title="微博">
                            <input type="radio" name="platform" value="车家号" title="车家号">
                            <input type="radio" name="platform" value="微信公众号" title="微信公众号">
                            <input type="radio" name="platform" value="今日头条" title="今日头条">
                            <input type="radio" name="platform" value="懂车帝" title="懂车帝">
                            <input type="radio" name="platform" value="其他" title="其他">
                          </div>
          </div>
                    <div class="layui-form-item">
            <label class="layui-form-label">行业分类：</label>
            <div class="layui-input-block">
              <input type="radio" name="industry" value="" title="全部" checked>
                            <input type="radio" name="industry" value="文化" title="文化">
                            <input type="radio" name="industry" value="历史" title="历史">
                            <input type="radio" name="industry" value="三农" title="三农">
                            <input type="radio" name="industry" value="财经" title="财经">
                            <input type="radio" name="industry" value="科技" title="科技">
                            <input type="radio" name="industry" value="体育" title="体育">
                            <input type="radio" name="industry" value="汽车" title="汽车">
                            <input type="radio" name="industry" value="娱乐" title="娱乐">
                            <input type="radio" name="industry" value="时尚" title="时尚">
                            <input type="radio" name="industry" value="健康" title="健康">
                            <input type="radio" name="industry" value="教育" title="教育">
                            <input type="radio" name="industry" value="母婴" title="母婴">
                            <input type="radio" name="industry" value="美食" title="美食">
                            <input type="radio" name="industry" value="旅游" title="旅游">
                            <input type="radio" name="industry" value="公益" title="公益">
                            <input type="radio" name="industry" value="游戏" title="游戏">
                            <input type="radio" name="industry" value="动漫" title="动漫">
                            <input type="radio" name="industry" value="社会" title="社会">
                            <input type="radio" name="industry" value="房产" title="房产">
                            <input type="radio" name="industry" value="职场" title="职场">
                            <input type="radio" name="industry" value="情感" title="情感">
                            <input type="radio" name="industry" value="搞笑" title="搞笑">
                            <input type="radio" name="industry" value="新闻" title="新闻">
                            <input type="radio" name="industry" value="家居" title="家居">
                            <input type="radio" name="industry" value="生活" title="生活">
                          </div>
          </div>
                    <div class="layui-form-item">
            <label class="layui-form-label">账号认证：</label>
            <div class="layui-input-block">
              <input type="radio" name="account_auth" value="" title="全部" checked>
                            <input type="radio" name="account_auth" value="0" title="未认证">
                            <input type="radio" name="account_auth" value="1" title="黄V认证">
                            <input type="radio" name="account_auth" value="2" title="蓝V认证">
                            <input type="radio" name="account_auth" value="3" title="红V认证">
                          </div>
          </div>
                    <div class="layui-form-item">
            <label class="layui-form-label">参考粉丝数：</label>
            <div class="layui-input-block">
              <input type="radio" name="fans_num" value="" title="全部" checked>
                            <input type="radio" name="fans_num" value="1" title="0-1000">
                            <input type="radio" name="fans_num" value="5" title="1001-5000">
                            <input type="radio" name="fans_num" value="10" title="5001-1万">
                            <input type="radio" name="fans_num" value="50" title="1万-5万">
                            <input type="radio" name="fans_num" value="100" title="5万-10万">
                            <input type="radio" name="fans_num" value="1000" title="10万-100万">
                            <input type="radio" name="fans_num" value="5000" title="100万-500万">
                            <input type="radio" name="fans_num" value="10000" title="500万-1000万">
                            <input type="radio" name="fans_num" value="10001" title="1000万以上">
                          </div>
          </div>
                    <div class="layui-form-item">
            <label class="layui-form-label">参考阅读数：</label>
            <div class="layui-input-block">
              <input type="radio" name="read_num" value="" title="全部" checked>
                            <input type="radio" name="read_num" value="1" title="0-1000">
                            <input type="radio" name="read_num" value="5" title="1001-5000">
                            <input type="radio" name="read_num" value="10" title="5001-1万">
                            <input type="radio" name="read_num" value="50" title="1万-5万">
                            <input type="radio" name="read_num" value="100" title="5万-10万">
                            <input type="radio" name="read_num" value="101" title="10万以上">
                          </div>
          </div>
                    <div class="layui-form-item">
            <label class="layui-form-label">可发时间：</label>
            <div class="layui-input-block">
              <input type="radio" name="weekend_publish" value="" title="全部" checked>
                            <input type="radio" name="weekend_publish" value="1" title="周末在线">
                          </div>
          </div>
                    <div class="layui-form-item">
            <label class="layui-form-label">官方自媒体：</label>
            <div class="layui-input-block">
              <input type="radio" name="authority_media" value="" title="全部" checked>
                            <input type="radio" name="authority_media" value="1" title="官方自媒体">
                            <input type="radio" name="authority_media" value="0" title="非官方自媒体">
                          </div>
          </div>
                    <div class="layui-form-item">
            <label class="layui-form-label">署名：</label>
            <div class="layui-input-block">
              <input type="radio" name="can_sign" value="" title="全部" checked>
                            <input type="radio" name="can_sign" value="1" title="可带">
                            <input type="radio" name="can_sign" value="0" title="不可带">
                          </div>
          </div>
                    <div class="layui-form-item">
            <label class="layui-form-label">新闻源：</label>
            <div class="layui-input-block">
              <input type="radio" name="news_resource" value="" title="全部" checked>
                            <input type="radio" name="news_resource" value="1" title="百度新闻源">
                            <input type="radio" name="news_resource" value="2" title="头条新闻源">
                          </div>
          </div>
                    <div class="layui-form-item">
            <label class="layui-form-label">价格分类：</label>
            <div class="layui-input-block">
              <input type="radio" name="price" value="" title="全部" checked>
                            <input type="radio" name="price" value="0@50" title="0~50">
                            <input type="radio" name="price" value="50@200" title="50~200">
                            <input type="radio" name="price" value="200@500" title="200~500">
                            <input type="radio" name="price" value="500@1000" title="500~1000">
                            <input type="radio" name="price" value="1000@2000" title="1000~2000">
                            <input type="radio" name="price" value="2000@5000" title="2000~5000">
                            <input type="radio" name="price" value="5000@999999" title="5000以上">
                              <div  style="margin-left:50px;display: inline-block">
                    <div style="float: left">
                        <input type="text" id="price_min" placeholder="￥" >
                    </div>
                    <div class="xian">-</div>
                    <div style="float: left">
                        <input type="text" id="price_max" placeholder="￥">
                    </div>
                    <input type="radio" name="price" value="init" title="确定">
                </div>

                            </div>
          </div>
                    <div class="layui-form-item">
            <label class="layui-form-label">可发：</label>
            <div class="layui-input-block">
              <input type="radio" name="we_kefa" value="" title="全部" checked>
                            <input type="radio" name="we_kefa" value="1" title="可发视频">
                            <input type="radio" name="we_kefa" value="2" title="可发微头条">
                          </div>
          </div>
                    <div class="layui-form-item">
            <label class="layui-form-label">排序：</label>
            <div class="layui-input-block">
              <input type="radio" name="sort" value="" title="全部" checked>
                            <input type="radio" name="sort" value="10" title="v0价格升序">
                            <input type="radio" name="sort" value="11" title="v0价格降序">
                          </div>
          </div>
                  </div>
      </div>
      <div class="layui-col-md12 step2">
        <div class="card tabs">
          <div class="layui-row">
            <div class="tabs-left">
              <li><input type="radio" name="recommend" value="" title="媒体查找" checked=""></li>
              <li><input type="radio" name="recommend" value="1" title="今日推荐"></li>
              <!-- <input type="radio" name="recommend" value="2" title="今日新增"> -->
              <li><input type="radio" name="recommend" value="3" title="在线媒体">
                <img src="/static/assets/img/icon_new.gif" alt=""></li>
                <li><input type="radio" name="recommend" value="5" title="纯积分媒体">
                    <img src="/static/assets/img/icon_new.gif" alt=""></li>
            </div>
            <div class="tabs-input">
              <input type="text" id="media_name" name="media_name" placeholder="请输入媒体名称" autocomplete="off"
                     class="layui-input">
            </div>
              <div class="tabs-input">
                  <input type="text" id="remark" name="remark" placeholder="请输入备注" autocomplete="off"
                         class="layui-input">
              </div>
            <div class="tabs-export">
              <button type="button" class="layui-btn btn-success exportData">
                <span>导出</span>
                <span class="iconfont iconicon-test"></span>
              </button>
            </div>
            <button type="button" class="layui-btn btn-success" id="sousuo" style="float: right; margin-left: 10px;">
                  <span>搜索</span>
            </button>
            <button style="display: none;" class="layui-btn" id="submit" lay-submit lay-filter="submit">立即提交</button>
          </div>
        </div>
      </div>
    </form>
    <div class="layui-col-md12 step2">
      <div class="card table">
        <table id="table-media-list" lay-filter="mediaTable"></table>
      </div>
    </div>
  </div>
</div>


<script type="text/javascript" src="/static/assets/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="/static/assets/js/layui/layui.js"></script>
<script type="text/javascript" src="/static/assets/js/JsonExportExcel.min.js"></script>
<script type="text/javascript" src="/static/assets/js/global.js"></script>

<script>
  layui.use(['element', 'layer', 'table', 'form'], function () {
    var table = layui.table;
    var form = layui.form;
    var layer = layui.layer;
    var param = {};
    var cols = [[
        { field: 'wemedia_name', align: 'center', title: '名称', minWidth:200, templet: '#wename_tpl' },
        { field: 'industry', align: 'center', title: '行业分类', minWidth: 100 },
        { field: 'platform', align: 'center', title: '平台', minWidth: 100 },
        { field: 'account_auth', align: 'center', title: '认证', minWidth: 100, templet: '#auth_tpl' },
        { field: 'cost', align: 'center', title: '成本价', minWidth: 100, templet: '#cost_tpl' },
        { field: 'v0_cost', align: 'center', title: 'v0价格', minWidth: 100, templet: '#v0_cost_tpl' },
        { field: 'v1_cost', align: 'center', title: 'v1价格', minWidth: 100, templet: '#v1_cost_tpl' },
        { field: 'v2_cost', align: 'center', title: 'v2价格', minWidth: 100, templet: '#v2_cost_tpl' },
        { field: 'v3_cost', align: 'center', title: 'v3价格', minWidth: 100, templet: '#v3_cost_tpl' },
        { field: 'province', align: 'center', title: '地区', minWidth: 100 },
        { field: 'avg_publish_time', align: 'center', title: '平均出稿时间', width: 120},
        { field: 'fans_num_str', align: 'center', title: '粉丝数', minWidth: 100 },
        { field: 'read_num_str', align: 'center', title: '阅读数', minWidth: 100 },
        { field: 'can_video', align: 'center', title: '可发视频', minWidth: 100, templet:'#can_video_tpl' },
        { field: 'weekend_publish', align: 'center', title: '周末可发', minWidth: 100, templet:'#weekend_tpl' },
        { field: 'remark', align: 'center', title: '备注' , minWidth: 200}
      ]];

    var dataTable = table.render({
      elem: '#table-media-list',
      url: '/fxadmin/wemedia/index.html',
      method: 'POST',
      // toolbar: true,
      // defaultToolbar: ["filter"],
      cols: cols,
      cellMinWidth: 100,
      page: true,
      limit:20
    });

    // 上方条件筛选事件
    // $("#media_name").on("input", function () {
    //   $("#submit").trigger('click');
    // });
    // $("#remark").on("input", function () {
    //       $("#submit").trigger('click');
    //   });
    form.on('radio', function () {
      $("#submit").trigger('click');
    });

    // form.on('select', function () {
    //   $("#submit").trigger('click');
    // });

      $("#sousuo").on("click", function () {
          $("#submit").trigger('click');
      });

    form.on('submit(submit)', function (data) {
      param = data.field;
        if(param.price == 'init'){
            var min_price = $('#price_min').val(),
                max_price = $('#price_max').val();
            if(min_price == '' &&  max_price == ''){
                layer.msg('价格区间不能为空', { icon: 5 });
                return false;
            }
            param.price = (min_price == '' ? 0 : min_price) + '@' + (max_price == '' ? 999999 : max_price);
        }
      reloadTable(1);
      return false;
    });

    //价格导出
    $(".exportData").off().on('click', function () {
      var params = $("#filtForm").serialize();
      $.ajax({
        type: "POST",
        url: '/fxadmin/wemedia/index.html?export=true&' + params,
        dataType: "json",
        beforeSend: function () {
          var index = layer.load(1, {
            shade: [0.1, '#000']
          });
        },
        success: function (res) {
          if (res.code === 200) {
            layer.closeAll();
            JsonToExcel(res.data, '自媒体价格表', 'sheet', res.msg);
          } else {
            layer.closeAll();
            layer.msg(res.msg, { icon: 5 });
          }
        }
      });
    });
    // 重新加载表格
    function reloadTable(page) {
      var curr;
      if (page) {
        curr = { curr: 1 }
      } else {
        curr = {}
      }
      dataTable.reload({
        where: param,
        page: curr
      });
    }

 });
 $("body").on('mouseover', ".online", function () {
    layer.tips('小编在线收稿ing~', $(this), {
      tips: [2,'#1074d0'],
      time: 0
    });
  }).on('mouseout', '.online', function () {
    layer.closeAll();
  });
  $("body").on('mouseover', "[data-tip]", function () {
      layer.tips($(this).data('tip'), $(this), {
          tips: [2,'#1074d0'],
          time: 0
      });
  }).on('mouseout', "[data-tip]", function () {
      layer.closeAll();
  });
</script>

<script type="text/html" id="wename_tpl">
    {{# if(d.recommend === 3){  }}
    <span class="layui-badge-dot online" style="background-color: #13ce66"></span>
    {{# } }}
    {{# if(d.mediauptime){ }}
    <span class="layui-badge">荐</span>
    {{# } }}
    <a href="{{d.case_link}}" target="_blank">{{d.wemedia_name}}</a>
    {{# if(d.entrance_link !== ''){ }}
    <a href="{{d.entrance_link}}" target="_blank" style="color:#fd5c5c;">（入口）</a>
    {{# } }}
    {{# if(d.authority_media==1){ }}
    <span class="layui-badge" style="background-color: #ffc24b" data-tip="官方自媒体">V </span>
    {{# } }}
    {{# var  tags=['quality_tag','stable_tag','hot_tag','pine_tag','recommend_tag','only_tag','fast_tag'] ;var tag_name=['优','稳','热','松','荐','独','秒'];
    var tags_desc=['价格优','价格、出稿稳定','发布多','不挑稿，审核松','推荐','独家合作','快速出稿'];
    var tags_color=['#fec84d','#3697eb','#fe513b','#f746bd','#fc4a93','#ac43f4','#4fc7fd'];
    for(var i=0; i< tags.length;i++ ){ }}
    {{# if(d[tags[i]] >0){ }}
    <span class="layui-badge {{tags[i]}}" style="background-color:{{tags_color[i]}}"  data-tip="{{tags_desc[i]}}">{{tag_name[i]}}</span>
    {{# } }}
    {{# } }}
</script>

<script type="text/html" id="auth_tpl">
    {{# if( d.account_auth == 1 ){ }}
    <span class='tag-success'>已认证</span>
    {{# }else{ }}
    <span class='tag-default'>未认证</span>
    {{# } }}
</script>

<script type="text/html" id="reserve_tpl">
    {{# if( d.reserve == 1 ){ }}
    <span class='tag-danger'>需要</span>
    {{# }else { }}
    <span class='tag-success'>不需要</span>
    {{# } }}
</script>
<script type="text/html" id="can_video_tpl">
  {{# if( d.can_video === 0   ){ }}
  <span class="tag-danger">不可发</span>
  {{# }else{ }}
  可发视频
  {{# } }}
</script>
<script type="text/html" id="weekend_tpl">
  {{# if( d.weekend_publish == 0   ){ }}
  周末不可发
  {{# }else{ }}
  <span class="tag-success">周末可发</span>
  {{# } }}
</script>
<script type="text/html" id="cost_tpl">
    {{# if(d.recommend == 5){ }}
    {{d.jf_cost}}积分
    {{# }else{ }}
    ￥{{d.cost}}
    {{# } }}
</script>
<script type="text/html" id="v0_cost_tpl">
    {{# if(d.recommend == 5){ }}
    {{d.jf_cost}}积分
    {{# }else{ }}
    ￥{{d.v0_cost}}
    {{# } }}
</script>
<script type="text/html" id="v1_cost_tpl">
    {{# if(d.recommend == 5){ }}
    {{d.jf_cost}}积分
    {{# }else{ }}
    ￥{{d.v1_cost}}
    {{# } }}
</script>
<script type="text/html" id="v2_cost_tpl">
    {{# if(d.recommend == 5){ }}
    {{d.jf_cost}}积分
    {{# }else{ }}
    ￥{{d.v2_cost}}
    {{# } }}
</script>
<script type="text/html" id="v3_cost_tpl">
    {{# if(d.recommend == 5){ }}
    {{d.jf_cost}}积分
    {{# }else{ }}
    ￥{{d.v3_cost}}
    {{# } }}
</script>